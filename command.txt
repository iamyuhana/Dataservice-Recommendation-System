/* Docker 설치
 * Install the Compose plugin > Install using the repository: https://docs.docker.com/compose/install/linux/
 */
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo chmod 666 /var/run/docker.sock
docker ps

sudo apt-get update
sudo apt-get install docker-compose-plugin
docker compose version

* https://docs.gitlab.com/ee/install/docker.html#install-gitlab-using-docker-compose
Set up the volumes location: 디렉토리 생성
sudo mkdir -p /srv/gitlab
export GITLAB_HOME=/srv/gitlab
sudo vi docker-compose.yml
------------------------------------------------------------
version: '3.6'
services:
  gitlab:
    image: gitlab/gitlab-ce:latest
    container_name: gitlab
    restart: always
    hostname: 'gitlab'     
    environment:
      GITLAB_OMNIBUS_CONFIG: |
        # Add any other gitlab.rb configuration here, each on its own line
              external_url 'http://34.64.81.49:8088'
    ports:
      - '8088:80'
      - '44388:443'
      - '2288:22'
    volumes:
      - '$GITLAB_HOME/config:/etc/gitlab'
      - '$GITLAB_HOME/logs:/var/log/gitlab'
      - '$GITLAB_HOME/data:/var/opt/gitlab'
    shm_size: '256m'
------------------------------------------------------------
docker compose up -d


sudo apt-get update
sudo apt-get install -y curl openssh-server ca-certificates perl
sudo apt-get install -y postfix
curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash
sudo EXTERNAL_URL="http://34.22.90.146:8088" apt-get install gitlab-ce
sudo gitlab-ctl reconfigure
sudo gitlab-ctl start
sudo gitlab-ctl status


curl -L "https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh" | sudo bash
sudo apt-get install gitlab-runner
sudo gitlab-runner status
